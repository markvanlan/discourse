<div class="admin-title">
  <h2>{{title}}</h2>
  {{#if canCheckEmails}}
    {{#if showEmails}}
      {{d-button
        action=(action "toggleEmailVisibility")
        class="hide-emails btn-default"
        label="admin.users.hide_emails"}}
    {{else}}
      {{d-button
        action=(action "toggleEmailVisibility")
        class="show-emails btn-default"
        label="admin.users.show_emails"}}
    {{/if}}
  {{/if}}
</div>

<div class='username controls'>
  {{text-field value=listFilter placeholder=searchHint}}
</div>

{{#load-more selector=".users-list tr" action=(action "loadMore")}}
  {{#if model}}
    <table class='table users-list grid'>
      <thead>
        {{admin-directory-toggle field="username" i18nKey='username' order=order ascending=ascending}}
        {{admin-directory-toggle field="email" i18nKey='email' order=order ascending=ascending}}
        {{admin-directory-toggle field="last_emailed" i18nKey='admin.users.last_emailed' order=order ascending=ascending}}
        {{admin-directory-toggle field="seen" i18nKey='last_seen' order=order ascending=ascending}}
        {{admin-directory-toggle field="topics_viewed" i18nKey="admin.user.topics_entered" order=order ascending=ascending}}
        {{admin-directory-toggle field="posts_read" i18nKey="admin.user.posts_read_count" order=order ascending=ascending}}
        {{admin-directory-toggle field="read_time" i18nKey="admin.user.time_read" order=order ascending=ascending}}
        {{admin-directory-toggle field="created" i18nKey="created" order=order ascending=ascending}}
        {{#if siteSettings.must_approve_users}}
          <th>{{i18n 'admin.users.approved'}}</th>
        {{/if}}
        <th>&nbsp;</th>
      </thead>
      <tbody>
        {{admin-users-list users=model}}
      </tbody>
    </table>
    {{conditional-loading-spinner condition=refreshing}}

  {{else}}
    <p>{{i18n 'search.no_results'}}</p>
  {{/if}}
{{/load-more}}
